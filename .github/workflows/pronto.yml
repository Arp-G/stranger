# name: Pronto

# on:
#   pull_request:
#     branches: [ master ]

# jobs:
#   build:
#     name: Pronto
#     runs-on: ubuntu-latest

#     steps:
#       - uses: actions/checkout@v2

#       - name: Copy secrets
#         run: cp ./config/env.secret.exs.sample ./config/dev.secret.exs

#       - uses: actions/setup-elixir@v1
#         id: setup-elixir
#         with:
#           otp-version: '23.0'
#           elixir-version: '1.10.4'

#       - name: Retrieve Mix Dependencies Cache
#         uses: actions/cache@v2
#         with:
#           path: deps
#           key: ${{ runner.os }}-${{ steps.setup-elixir.otp-version }}-${{ steps.setup-elixir.elixir-version }}-mix-${{ hashFiles(format('{0}{1}', github.workspace, '/mix.lock')) }}

#       - name: Fetch dependencies
#         run: mix deps.get

#       # Pronto
#       - name: Setup Ruby
#         uses: actions/setup-ruby@v1
#         with:
#           ruby-version: '2.6'

#       - name: Setup pronto for credo
#         run: gem install pronto-credo --no-document

#       - run: git fetch

#       - name: Run pronto
#         run: PRONTO_PULL_REQUEST_ID="$(jq --raw-output .number "$GITHUB_EVENT_PATH")" PRONTO_GITHUB_ACCESS_TOKEN="${{ github.token }}" pronto run -f github_pr -c origin/master
